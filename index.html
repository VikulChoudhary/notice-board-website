<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Notice Board</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; 
        }
        .btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        .btn-primary {
            background-color: #4f46e5;
            color: white;
        }
        .btn-primary:hover {
            background-color: #4338ca;
        }
        .btn-secondary {
            background-color: #10b981;
            color: white;
        }
        .btn-secondary:hover {
            background-color: #059669;
        }
        .btn-danger {
            background-color: #ef4444;
            color: white;
        }
        .btn-danger:hover {
            background-color: #dc2626;
        }
        .card {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
        }
        .tab {
            padding: 1rem 0.25rem;
            border-bottom-width: 2px;
            font-weight: 500;
            font-size: 0.875rem;
            color: #6b7280;
            border-color: transparent;
        }
        .tab:hover {
            color: #4b5563;
            border-color: #d1d5db;
        }
        .tab-active {
            color: #4f46e5;
            border-color: #4f46e5;
        }
    </style>
</head>
<body class="text-gray-800">

    <header class="bg-white shadow-md sticky top-0 z-20">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20">
            <div class="flex items-center">
                <svg class="h-8 w-8 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 12h6m-1 8h.01" />
                </svg>
                <h1 class="text-2xl font-bold ml-3">Local Community Hub</h1>
            </div>
            <div class="flex items-center space-x-4">
                <button id="admin-login-btn" class="btn btn-primary">Admin Login</button>
                <button id="post-notice-btn" class="btn btn-secondary hidden">Post a Notice</button>
                <button id="logout-btn" class="btn btn-danger hidden">Logout</button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="mb-6 border-b border-gray-200">
            <nav id="category-nav" class="-mb-px flex space-x-8" aria-label="Tabs">
                <a href="#" data-category="all" class="tab tab-active">All Notices</a>
                <a href="#" data-category="announcement" class="tab">Announcements</a>
                <a href="#" data-category="event" class="tab">Events</a>
                <a href="#" data-category="marketplace" class="tab">Marketplace</a>
            </nav>
        </div>

        <div id="notice-board" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        <div id="no-notices-message" class="hidden text-center py-12">
            <h3 class="mt-2 text-lg font-medium text-gray-900">No notices found</h3>
            <p class="mt-1 text-sm text-gray-500">Be the first to post something!</p>
        </div>

        <div class="my-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-6 border-b pb-2">Important Contacts (Ghaziabad)</h2>
            <div id="contacts-section" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"></div>
        </div>
    </main>
    
    <footer class="bg-white border-t mt-12">
        <div class="container mx-auto py-6 px-4 text-center text-gray-600">
            <p>&copy; 2025 Local Community Hub. All rights reserved.</p>
            <p class="text-sm mt-2">For admin access to post notices, please contact the society office.</p>
        </div>
    </footer>

    <!-- Modals -->
    <div id="admin-modal" class="hidden fixed z-30 inset-0 overflow-y-auto"></div>
    <div id="notice-modal" class="hidden fixed z-30 inset-0 overflow-y-auto"></div>
    <div id="message-box" class="hidden fixed top-5 right-5 bg-red-500 text-white py-2 px-4 rounded-lg shadow-lg"></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let isAdmin = false;
            let currentFilter = 'all';

            const localData = [
                { id: 1, title: "Water Supply Interruption", description: "Please note that the water supply will be interrupted on july 5th from 10:00 AM to 2:00 PM for scheduled maintenance.", category: "announcement", createdAt: new Date("2025-08-02T10:00:00"), contact: "" },
                { id: 2, title: "Community Clean-Up Drive", description: "Join us for a community clean-up drive on Sunday, july 10th at 9:00 AM. Meet at the community park.", category: "event", contact: "Mr. Vikul Choudhary, Block A", createdAt: new Date("2025-08-01T15:30:00") },
                { id: 3, title: "Police Control Room", description: "Ghaziabad Police", category: "contact", contact: "112", createdAt: new Date() },
                { id: 4, title: "Fire Station", description: "Ghaziabad Fire Control", category: "contact", contact: "101", createdAt: new Date() },
                { id: 5, title: "Ambulance", description: "Chief Medical Officer", category: "contact", contact: "108 / 102", createdAt: new Date() },
                { id: 6, title: "Women Helpline", description: "UP Police", category: "contact", contact: "1090", createdAt: new Date() },
                { id: 7, title: "Child Helpline", description: "Ghaziabad District", category: "contact", contact: "1098", createdAt: new Date() },
                { id: 8, title: "Society Security", description: "Main Gate", category: "contact", contact: "0120-XXXX-XXX", createdAt: new Date() },
                { id: 9, title: "Electricity (PVVNL)", description: "Toll-Free Complaint", category: "contact", contact: "1912", createdAt: new Date() },
                { id: 10, title: "Nagar Nigam", description: "Ghaziabad Control Room", category: "contact", contact: "18001803012", createdAt: new Date() }
            ];

            const elements = {
                adminLoginBtn: document.getElementById('admin-login-btn'),
                postNoticeBtn: document.getElementById('post-notice-btn'),
                logoutBtn: document.getElementById('logout-btn'),
                noticeModal: document.getElementById('notice-modal'),
                adminModal: document.getElementById('admin-modal'),
                noticeBoard: document.getElementById('notice-board'),
                noNoticesMessage: document.getElementById('no-notices-message'),
                categoryNav: document.getElementById('category-nav'),
                contactsSection: document.getElementById('contacts-section'),
                messageBox: document.getElementById('message-box'),
            };

            const getModalHTML = (id, title, formContent, submitText) => `
                <div class="flex items-center justify-center min-h-screen">
                    <div class="fixed inset-0 bg-gray-500 opacity-75"></div>
                    <div class="bg-white rounded-lg shadow-xl transform transition-all sm:max-w-lg sm:w-full m-4">
                        <form id="${id}-form">
                            <div class="px-4 pt-5 pb-4 sm:p-6">
                                <h3 class="text-lg font-medium text-gray-900">${title}</h3>
                                <div class="mt-4 space-y-4">${formContent}</div>
                            </div>
                            <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                                <button type="submit" class="btn btn-primary">${submitText}</button>
                                <button type="button" class="cancel-btn mt-3 sm:mt-0 sm:mr-3 btn bg-white border border-gray-300 text-gray-700 hover:bg-gray-50">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>`;

            elements.adminModal.innerHTML = getModalHTML('admin', 'Admin Login', '<input type="password" id="admin-password" placeholder="Enter password" class="mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md" required>', 'Login');
            elements.noticeModal.innerHTML = getModalHTML('notice', 'Post a New Notice', `
                <div><input type="text" name="title" placeholder="Title" class="mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md" required></div>
                <div><textarea name="description" rows="4" placeholder="Description" class="mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md" required></textarea></div>
                <div><select name="category" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 sm:text-sm rounded-md" required><option value="announcement">Announcement</option><option value="event">Event</option><option value="marketplace">Marketplace</option><option value="contact">Important Contact</option></select></div>
                <div><input type="text" name="contact" placeholder="Contact Info (Phone, Email, etc.)" class="mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"></div>
            `, 'Post');

            const adminForm = document.getElementById('admin-form');
            const noticeForm = document.getElementById('notice-form');

            const toggleAdminUI = (loggedIn) => {
                isAdmin = loggedIn;
                elements.adminLoginBtn.classList.toggle('hidden', loggedIn);
                elements.postNoticeBtn.classList.toggle('hidden', !loggedIn);
                elements.logoutBtn.classList.toggle('hidden', !loggedIn);
            };

            const showMessage = (message, isSuccess = false) => {
                elements.messageBox.textContent = message;
                elements.messageBox.className = `fixed top-5 right-5 py-2 px-4 rounded-lg shadow-lg ${isSuccess ? 'bg-green-500' : 'bg-red-500'} text-white`;
                setTimeout(() => { elements.messageBox.classList.add('hidden') }, 3000);
            };

            elements.adminLoginBtn.addEventListener('click', () => elements.adminModal.classList.remove('hidden'));
            elements.postNoticeBtn.addEventListener('click', () => elements.noticeModal.classList.remove('hidden'));
            elements.logoutBtn.addEventListener('click', () => {
                toggleAdminUI(false);
                showMessage("You have been logged out.", true);
            });

            document.querySelectorAll('.cancel-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    elements.adminModal.classList.add('hidden');
                    elements.noticeModal.classList.add('hidden');
                });
            });

            adminForm.addEventListener('submit', (e) => {
                e.preventDefault();
                if (document.getElementById('admin-password').value === "123456789") {
                    toggleAdminUI(true);
                    showMessage("Admin access granted.", true);
                    elements.adminModal.classList.add('hidden');
                } else {
                    showMessage("Incorrect password.");
                }
                adminForm.reset();
            });

            noticeForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const formData = new FormData(noticeForm);
                localData.push({
                    id: Date.now(),
                    title: formData.get('title'),
                    description: formData.get('description'),
                    category: formData.get('category'),
                    contact: formData.get('contact'),
                    createdAt: new Date()
                });
                renderAll();
                elements.noticeModal.classList.add('hidden');
                noticeForm.reset();
                showMessage("Notice posted successfully!", true);
            });

            const renderAll = () => {
                const notices = localData.filter(item => item.category !== 'contact');
                const contacts = localData.filter(item => item.category === 'contact');
                
                const filteredNotices = notices.filter(n => currentFilter === 'all' || n.category === currentFilter).sort((a, b) => b.createdAt - a.createdAt);
                elements.noticeBoard.innerHTML = filteredNotices.map(createNoticeCard).join('');
                elements.noNoticesMessage.classList.toggle('hidden', filteredNotices.length > 0);

                elements.contactsSection.innerHTML = contacts.sort((a, b) => a.title.localeCompare(b.title)).map(createContactCard).join('');
            };

            const getCategoryStyles = (category) => ({
                announcement: { bg: 'bg-blue-100', text: 'text-blue-800', border: 'border-blue-500' },
                event: { bg: 'bg-purple-100', text: 'text-purple-800', border: 'border-purple-500' },
                marketplace: { bg: 'bg-yellow-100', text: 'text-yellow-800', border: 'border-yellow-500' }
            }[category] || { bg: 'bg-gray-100', text: 'text-gray-800', border: 'border-gray-400' });

            const createNoticeCard = (notice) => {
                const styles = getCategoryStyles(notice.category);
                const formattedDate = notice.createdAt.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
                return `
                    <div class="card border-l-4 ${styles.border}">
                        <div class="p-5">
                            <div class="flex items-center justify-between mb-3">
                                <span class="inline-block px-3 py-1 text-xs font-semibold rounded-full uppercase ${styles.bg} ${styles.text}">${notice.category}</span>
                                <p class="text-xs text-gray-500">${formattedDate}</p>
                            </div>
                            <h3 class="text-xl font-bold text-gray-900 mb-2">${notice.title}</h3>
                            <p class="text-gray-700 mb-4 whitespace-pre-wrap">${notice.description}</p>
                            ${notice.contact ? `<div class="border-t pt-3 mt-3"><p class="text-sm text-gray-600"><strong class="font-semibold">Contact:</strong> ${notice.contact}</p></div>` : ''}
                        </div>
                    </div>`;
            };
            
            const createContactCard = (contact) => `
                <div class="card p-5 text-center">
                    <h4 class="text-lg font-bold text-indigo-700">${contact.title}</h4>
                    <p class="text-2xl font-semibold text-gray-800 mt-2">${contact.contact || ''}</p>
                    <p class="text-sm text-gray-600 mt-1">${contact.description || ''}</p>
                </div>`;

            elements.categoryNav.addEventListener('click', (e) => {
                if (e.target.tagName === 'A') {
                    e.preventDefault();
                    currentFilter = e.target.dataset.category;
                    document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('tab-active'));
                    e.target.classList.add('tab-active');
                    renderAll();
                }
            });

            renderAll();
        });
    </script>
</body>
</html>
